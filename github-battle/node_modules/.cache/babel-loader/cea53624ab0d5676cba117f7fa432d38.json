{"ast":null,"code":"import { get } from \"http\";\nconst id = \"YOUR_CLIENT_ID\";\nconst sec = \"YOUR_SECRET_ID\";\nconst params = \"?client_id=\".concat(id, \"&client_secret=\").concat(sec);\n\nfunction getErrorMsg(message, username) {\n  if (message === 'Not Found') {\n    return \"\".concat(username, \" doesn't exist\");\n  }\n\n  return message;\n}\n\nfunction getProfile(username) {\n  return fetch(\"https://api.github.com/users/\".concat(username).concat(params)).then(res => res.json()).then(profile => {\n    if (profile.message) {\n      throw new Error(getErrorMsg(profile.message, username));\n    }\n\n    return profile;\n  });\n}\n\nfunction getRepos(username) {\n  return fetch(\"https://api.github.com/users/\".concat(username, \"/repos\").concat(params, \"&per_page=100\")).then(res => res.json()).then(repos => {\n    if (repos.message) {\n      throw new Error(getErrorMsg(repos.message, username));\n    }\n\n    return repos;\n  });\n}\n\nfunction getStarCount(repos) {\n  return repos.reduce((count, {\n    stargazers_count\n  }) => count + stargazers_count, 0);\n}\n\nfunction calculateScore(followers, repos) {\n  return followers * 3 + getStarCount(repos);\n}\n\nfunction getUserData(player) {\n  return Promise.all([getProfile(player), getRepos(player)]).then(([profile, repos]) => ({\n    profile,\n    score: calculateScore(profile.followers, repos)\n  }));\n}\n\nfunction sortPlayers(players) {\n  return players.sort((a, b) => b.score - a.score);\n}\n\nexport function battle(players) {\n  return Promise.all([getUserData(players[0]), getUserData(players[1])]).then(results => sortPlayers(results));\n}\nexport function fetchPopularRepos(language) {\n  const endpoint = window.encodeURI(\"https://api.github.com/search/repositories?q=stars:>1+language:\".concat(language, \"&sort=stars&order=desc&type=Repositories\"));\n  return fetch(endpoint) //make request to github api\n  .then(res => res.json()) //turn response into json\n  .then(data => {\n    if (!data.items) {\n      //if there aren't any items throw an error\n      throw new Error(data.message);\n    }\n\n    return data.items; //return array of repos if they exist\n  });\n}","map":{"version":3,"sources":["/Users/Sarah Schwartz/Desktop/PRACTICE REACT/mcginnis-app/src/utils/api.js"],"names":["get","id","sec","params","getErrorMsg","message","username","getProfile","fetch","then","res","json","profile","Error","getRepos","repos","getStarCount","reduce","count","stargazers_count","calculateScore","followers","getUserData","player","Promise","all","score","sortPlayers","players","sort","a","b","battle","results","fetchPopularRepos","language","endpoint","window","encodeURI","data","items"],"mappings":"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","sourcesContent":["import { get } from \"http\"\n\nconst id = \"YOUR_CLIENT_ID\"\nconst sec = \"YOUR_SECRET_ID\"\nconst params = `?client_id=${id}&client_secret=${sec}`\n\nfunction getErrorMsg (message, username) {\n    if (message === 'Not Found') {\n        return `${username} doesn't exist`\n    }\n\n    return message\n}\n\nfunction getProfile (username) {\n    return fetch(`https://api.github.com/users/${username}${params}`)\n        .then((res) => res.json())\n        .then((profile) => {\n        if (profile.message) {\n            throw new Error(getErrorMsg(profile.message, username))\n        }\n\n        return profile\n    })\n}\n\nfunction getRepos (username) {\n    return fetch(`https://api.github.com/users/${username}/repos${params}&per_page=100`)\n        .then((res) => res.json())\n        .then((repos) => {\n            if (repos.message) {\n                throw new Error(getErrorMsg(repos.message, username))\n            }\n\n            return repos\n        })\n}\n\nfunction getStarCount (repos) {\n    return repos.reduce((count, { stargazers_count }) => count + stargazers_count , 0)\n}\n\nfunction calculateScore (followers, repos) {\n    return (followers * 3) + getStarCount(repos)\n}\n\nfunction getUserData (player) {\n    return Promise.all([\n        getProfile(player),\n        getRepos(player)\n        ]).then(([ profile, repos ]) => ({\n            profile,\n            score: calculateScore(profile.followers, repos)\n        }))\n}\n\nfunction sortPlayers (players) {\n    return players.sort((a, b) => b.score - a.score)\n}\n\nexport function battle (players) {\n    return Promise.all([\n        getUserData(players[0]),\n        getUserData(players[1])\n        ]).then((results) => sortPlayers(results))\n}\n\nexport function fetchPopularRepos (language) {\n    const endpoint = window.encodeURI(`https://api.github.com/search/repositories?q=stars:>1+language:${language}&sort=stars&order=desc&type=Repositories`)\n\n    return fetch(endpoint) //make request to github api\n        .then((res) => res.json()) //turn response into json\n        .then((data) => { \n            if (!data.items) { //if there aren't any items throw an error\n                throw new Error(data.message)\n            }\n            return data.items //return array of repos if they exist\n        })\n}"]},"metadata":{},"sourceType":"module"}